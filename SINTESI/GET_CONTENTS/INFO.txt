ÉS L'ANIMA DE L'AGENDA.

L'ARXIU CORREDOR ÉS EL QUE S'ENCARREGA DE RECÒRRER DESDE LA FITXA NUMERO 0 A LA 9999 DE LA PÀGINA DEL GENCAT/CULTURA/AGENDA EXECUTANT PER A CADA UNA D'AQUESTES L'ARXIU "MERCATBOT".

AQUEST ARXIU ("MERCATBOT") I QUE INCLOU UNA CLASSE ANOMENADA "SNOOPY CLASS" ÉS L'ENCARREGAT D'OBTENIR L'ID DE FITXA QUE LI PASSEN PER PARÀMETRE I RECÒRRER TOTA LA FITXA EN BUSCA DE LES DADES:

TIPUS D'ACTE, TITOL, DESCRIPCIÓ, DATES DE CELEBRACIÓ, HORARIS, LLOCS, ENTITATS ORGANITZADORES, ETC.

UN COP OBTÉ LES DADES I LES SEPARA DE LES QUE NO HA TROBAT LES INCLOU EN 4 ARXIUS "CSV" DEPENENT DELS RESULTATS.

-SI L'ID DE FITXA QUE L'HI HAN PASSAT PER PARÀMETRE RESPON DE MANERA "404" (NO TROBADA GRACIES A L'ANOMENADA SNOOPY CLASS) L'INCLOU A LA CARPETA DE FITXES_BUIDES AMB EL NUMERO DE FITXA COM A NOM D'ARXIU.

-SI L'ID DE FITXA ÉS CORRECTE I UN COP HA TROBAT LA/LES DATA/ES, INCLOU AQUESTA/ES A LA CARPETA DATES_CELEBRACIO AMB EL NUMERO DE FITXA COM A NOM DE L'ARXIU, AQUEST CONTÉ PER A CADA LINEA I DATA TROBADA, L'ID DE FITXA I LA DATA (TANT SOLS UNA DATA PER LINEA), FENT DE LA UNIÓ D'AQUESTS LA CLAU PRIMÀRIA DE LA TAULA DATES_ESDEVENIMENT (DE LA BASE DE DADES). UN COP FINALITZAT EL "PARSATGE" ES TANCA EL DOCUMENT I ES FA UN "LOAD DATA FILE" DEL ARXIU A L'ANOMENADA TAULA DE L'ANOMENADA BASE DE DADES.

-A LA VEGADA QUE AQUESTA FITXA DEL GENCAT HA RESPÒS DE MANERA CORRECTA (DOCUMENT FOUND) TAMBÉ S'INCLOU EN UN DOCUMENT "CSV" DE LA CARPETA LLOCS_CELEBRACIO EL/S LLOC/S DE CELEBRACIÓ. AL FINALITZAR EL "PARSATGE" TAMBÉ S'INCLOU A LA BASE DE DADES FENT EL LOAD DATA FILE A LA TAULA LLOCS_CELEBRACIO. 

-UN COP ACABAT EL "PARSATGE" DE LES DADES TAMBÉ ES TANCA EL DOCUMENT DE LA CARPETA FITXES QUE CONTÉ LES DADES COM EL TÍTOL, LA DESCRIPCIÓ I TAMBÉ LES DADES INCLOSES EN EL FITXERS DE LES ALTRES DOS CARPETES (AQUEST ASPECTE ES TRACTARÀ SI HI HA TEMPS) I ES PUJA A LA BASE DE DADES DINS LA TAULA ESDEVENIMENT.


S'HA D'ANAR AMB COMPTE CUANT S'EXECUTA L'ARXIU CORREDOR JA QUE SEGONS EL SERVIDOR APACHE USAT FALLÀRA ALS 60 SEGONS D'HAVER-LO INICIALITZAT, TEMPS QUE PER DESCOMPTAT ÉS MASSA POC PER A RECÒRRER TOTES LES FITXES.

AMB LA VERSIÓ DE XAMPP PER A UBUNTU AIXÒ NO PASSA. (S'INVESTIGARÀ EL PERQUÈ)